<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>04 - Resizable split panels || Advent of JavaScript</title>
  <link rel="stylesheet" href="../css/index.css" />
  <style>
    :root {
      --light: #CAE3DB;
      --middle: #698662;
      --dark: #536A4E;
    }

    html {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
    }

    main {
      margin: 0;
      padding: 0;
      display: grid;
      grid-template-rows: 40vh 60vh;
      grid-template-columns: 30vw 70vw;
      gap: 0.25em; /* optional gap between grid cells */
      background-color: black;

    }
    main:hover {
      cursor: col-resize;
      gap: 0.5em;
      background: linear-gradient(to right, red , yellow);
    }

    main:has(div:hover) {
      cursor: auto;
      gap: 0.25em;
      background: black;
    }

    .top {
      background-color: var(--light);
      grid-column: 1 / 3;
    }

    .left {
      background: var(--middle);
    }

    .right {
      background: var(--dark);
    }
  </style>
</head>

<body>
<header>
  <details open>
  <summary><h1>Challenge 4 - Resizable split panels || Advent of JavaScript</h1></summary>
  Create a layout, where the panels can be resized dynamically. 1. You can drag the vertical left and right to resize the bottom two panels. 2. You can drag the horizontal line up and down to resize the top panel. 
  </details>
  </header>
  <h3>Solution</h3>
<main data-style="width:100%;grid-template-rows: calc(${height}vh + ${pixelY}px) calc(${100-height}vh - ${pixelY}px);grid-template-columns: calc(${width}vw + ${pixelX}px) calc(${100-width}vw - ${pixelX}px);"
  data-on-pointerdown="if (e.target.tagName=='MAIN') {deltaY=e.clientY; moving=true; startY=pixelY;deltaX=e.clientX;startX=pixelX;}"
  data-on-pointermove="if (moving) {pixelY=startY+(e.clientY-deltaY);pixelX=startX+(e.clientX-deltaX);}"
  data-on-pointerup="if (moving) moving = false;">
  <div class="top"></div>
  <div class="left"></div>
  <div class="right"></div>
</main>
<div data-include="../footer.html"></div>
</body>

<script>
  let height = 30;
  let width = 20;
  let pixelY = 0;
  let pixelX = 0;
  let deltaY = 0;
  let deltaX = 0;
  let moving = false;
  let startY = 0;
  let startX = 0;
</script>

<script src="https://cdn.jsdelivr.net/gh/hbroek/reken/dist/reken.min.js"></script>

</html>